<!DOCTYPE html>
<meta charset="utf-8">
<html lang = "en">
  <head>
	<script type="text/javascript" src="d3.min.js"></script>
  </head>
  <body>
    <p>Hello!</p>
  </body>
<script>

console.log('before csv');

d3.csv("weights-network.csv", function(data) {
    console.log('in csv');
   
  //if (error) throw error;

  // load in csv file and filter data
  graph = { "links": [] , "nodes": []};
  console.log(data);
  data.forEach(node => graph.nodes.push( { "id":node.source , "group":Math.floor(Math.random() * 5)} ));
  data.forEach(link => graph.links.push( link ) );

    console.log(graph.links);

  graph.nodes = d3.keys(d3.nest()
    .key(function(d){ return d.name; })
    .map(graph.nodes));

    console.log(graph.nodes);
});
/*d3.csv("weights-network-cell.csv", function(error, links) {
  if (error) throw error;

  var nodesByName = {};

  // Create nodes for each unique source and target.
  links.forEach(function(link) {
    link.source = nodeByName(link.source);
    link.target = nodeByName(link.target);
  });

  // Extract the array of nodes from the map by name.
  var nodes = d3.values(nodesByName);

  // Create the link lines.
  var link = svg.selectAll(".link")
      .data(links)
    .enter().append("line")
      .attr("class", "link");

  // Create the node circles.
  var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 4.5)
      .call(force.drag);

  // Start the force layout.
  force
      .nodes(nodes)
      .links(links)
      .on("tick", tick)
      .start();

  function tick() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  }

  function nodeByName(name) {
    return nodesByName[name] || (nodesByName[name] = {name: name});
  }
});*/
</script>
</html>
